#!/bin/bash
#
# Update data
#
# Main script for building/updating the data files used by the viewer.
#

source config.sh

#
mkdir -p ${GDIR}

# Copy the genomeSets file to the dataDir. This defines named sets of genomes
# and will have cooresponding buttons in the browser for easy selection.
cp "${BDIR}/genomeSets.tsv" "${GDIR}/genomeSets.tsv"

# Generate feature files
${PYTHON} "${BDIR}/getDataFromMouseMine.py" "${GDIR}"

# Generate synteny blocks
${PYTHON} "${BDIR}/sb" --dir "${GDIR}" > "${GDIR}/blocks.tsv"

# Write timestamp
tsfile="${GDIR}"/TIMESTAMP.tsv
echo "TIMESTAMP" > "${tsfile}"
echo `date` >> "${tsfile}"

# THE END
