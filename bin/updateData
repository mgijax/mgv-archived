#!/bin/bash
#
# Update data
#
# Main script for building/updating the data files used by the viewer.
#

source config.sh

#
mkdir -p ${OUTDIR}

# Copy the genomeSets file to the dataDir. This defines named sets of genomes
# and will have cooresponding buttons in the browser for easy selection.
cp "${BIN}/genomeSets.tsv" "${OUTDIR}/genomeSets.tsv"

# Generate feature files
${PYTHON} "${BIN}/getDataFromMouseMine.py" "${OUTDIR}"

# Generate synteny blocks
${PYTHON} "${BIN}/sb" --dir "${OUTDIR}" > "${OUTDIR}/blocks.tsv"

# Write timestamp
tsfile="${OUTDIR}"/TIMESTAMP.tsv
echo "TIMESTAMP" > "${tsfile}"
echo `date` >> "${tsfile}"

# THE END
